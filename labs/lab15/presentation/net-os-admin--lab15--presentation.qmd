---
## Author
author:
  name: Кхари Жекка Кализая арсе
  degrees: DSc
  orcid: 0000-0002-0877-7063
  email: kulyabov-ds@rudn.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6
## Title
title: Лабораторная работа № 15
subtitle: Настройка сетевого журналирования
license: CC BY
date: today
date-format: "YYYY-MM-DD" # Example: 2025-09-06
---
# цель

## цель
:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * Получение навыков по работе с журналами системных событий.

:::
::::::::::::::


# Настройка сервера сетевого журнала

## шаги

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * создание файла конфигурации
  * настройка файла
  * перезапуска
  * настройка месжетевого экрана

:::

::::::::::::::


## создание файла конфигурации

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * создается файл netlog-server.conf 
  в котором пишется конфигурацию

:::
::: {.column width="70%"}

![](./image/01.jpg)

:::
::::::::::::::

## настройка файла

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * загрузается модуль imtcp
  чтобы получить сообщения 
  через tcp
  * начинает сервер TCP rsyslog
  который слушает порт 514

:::
::: {.column width="70%"}

![](./image/02.jpg)

:::
::::::::::::::

## перезапуска

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * перезапуска службы rsyslog

:::
::: {.column width="70%"}

![](./image/03.jpg)

:::
::::::::::::::


## порты службы rsyslog

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * shell = shell 514/tcp cmd
  в файле /etc/services

:::
::: {.column width="70%"}

![](./image/04.jpg)

:::
::::::::::::::

## настройка месжетевого экрана

:::::::::::::: {.columns align=center}

::: {.column width="70%"}

![](./image/05.jpg)

:::
::::::::::::::


# Настройка клиента сетевого журнала

## шаги

:::::::::::::: {.columns align=center}
::: {.column width="100%"}

  * создание файла
  * настройка в файле
  * перезапуска службы rsyslog

:::

::::::::::::::


## создание файла

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * создание файла для конфигурации rsyslog

:::
::: {.column width="70%"}

![](./image/06.jpg)

:::
::::::::::::::

## настройка в файле

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * *: все удобства
  * .* : все уравни
  * @@ отправление через TCP
  * server.qscalizaya.net : hostname сервера
  * :514 : порт tcp 514

:::
::: {.column width="70%"}

![](./image/07.jpg)

:::
::::::::::::::

## перезапуска

:::::::::::::: {.columns align=center}

::: {.column width="70%"}

![](./image/08.jpg)

:::
::::::::::::::


# Просмотр журнала


## шаги

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * tail на сервере
  * gnome
  * установка lnav
  * проверка

:::

::::::::::::::


## tail на сервере

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * tail -f /var/log/messages

:::
::: {.column width="70%"}

![](./image/09.jpg)

:::
::::::::::::::

## gnome

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * запускать в background режиме
:::
::: {.column width="70%"}

![](./image/11.jpg)

:::
::::::::::::::

## установка lnav

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * dnf -y install lnav
  * в клиенте тоже

:::
::: {.column width="70%"}

![](./image/12.jpg)

:::
::::::::::::::

## проверка

:::::::::::::: {.columns align=center}

::: {.column width="70%"}

![](./image/13.jpg)

:::
::::::::::::::


# Внесение изменений в настройки внутреннего окружения виртуальных машин

## сервер

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * скопировать файл netlog-server.conf
  * файл netlog.sh для скрипта
:::
::: {.column width="70%"}

![](./image/15.jpg)

:::
::::::::::::::

## сервер

:::::::::::::: {.columns align=center}

::: {.column width="70%"}

![](./image/16.jpg)

:::
::::::::::::::

## клиент

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * скопировать файл netlog-server.conf
  * файл netlog.sh для скрипта
:::
::: {.column width="70%"}

![](./image/17.jpg)

:::
::::::::::::::

## клиент

:::::::::::::: {.columns align=center}

::: {.column width="70%"}

![](./image/18.jpg)

:::
::::::::::::::


## vagrantfile

:::::::::::::: {.columns align=center}

::: {.column width="70%"}

![](./image/19.jpg)

:::
::::::::::::::

## vagrantfile

:::::::::::::: {.columns align=center}

::: {.column width="70%"}

![](./image/20.jpg)

:::
::::::::::::::
