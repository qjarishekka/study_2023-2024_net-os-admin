---
## Author
author:
  name: Кхари Жекка Кализая Арсе
  degrees: DSc
  orcid: 0000-0002-0877-7063
  email: 1032234412@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6
## Title
title: презентация №13
subtitle: Настройка NFS
license: CC BY
date: today
date-format: "YYYY-MM-DD" # Example: 2025-09-06
---



# Настройка сервера NFSv4

## установка утилиты

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * dnf -y install nfs-utils

:::
::: {.column width="70%"}

![](./image/01.jpg)

:::
::::::::::::::


## каталог для монтирования

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * mkdir -p /srv/nfs

:::
::: {.column width="70%"}

![](./image/02.jpg)

:::
::::::::::::::

## файла для настройки /etc/exports

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * vim /etc/exports

:::
::: {.column width="70%"}

![](./image/03.jpg)

:::
::::::::::::::


## настройка контекста безопасности

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * semanage fcontext -a -t nfs_t "/srv/nfs(/.*)?"

:::
::: {.column width="70%"}

![](./image/04.jpg)

:::
::::::::::::::

## настройка SELinux

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * restorecon -vR /srv/nfs

:::
::: {.column width="70%"}

![](./image/05.jpg)

:::
::::::::::::::



## Запуск утилиты

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * systemctl start nfs-server.service
  * systemctl enable nfs-server.service


:::
::: {.column width="70%"}

![](./image/06.jpg)

:::
::::::::::::::


## настройка firewall

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * firewall-cmd --add-service=nfs
  * firewall-cmd --add-service=nfs --permanent
  * firewall-cmd --reload


:::
::: {.column width="70%"}

![](./image/06.jpg)

:::
::::::::::::::

## showmount на клиенет

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * showmount -e server.qscalizaya.net

:::
::: {.column width="70%"}

![](./image/09.jpg)

:::
::::::::::::::

## выключение firewall

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * systemctl stop firewalld.service
  * showmount -e server.qscalizaya.net

:::
::: {.column width="70%"}

![](./image/10.jpg)

:::
::::::::::::::

## настройка firewall

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * firewall-cmd --get-services
  * firewall-cmd --add-service=mountd --add-service=rpc-bind
  * firewall-cmd --add-service=mountd --add-service=rpc-bind --permanent
  * firewall-cmd --reload

:::
::: {.column width="70%"}

![](./image/10.jpg)

:::
::::::::::::::

#  Монтирование NFS на клиенте

## создание каталога

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * mkdir -p /mnt/nfs
  * mount server.user.net:/srv/nfs /mnt/nfs

:::
::: {.column width="70%"}

![](./image/12.jpg)

:::
::::::::::::::

## mount

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * mount

:::
::: {.column width="70%"}

![](./image/13.jpg)

:::
::::::::::::::

## настройка фалка /etc/fstab

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * nano /etc/fstab

:::
::: {.column width="70%"}

![](./image/14.jpg)

:::
::::::::::::::


## перезапуск и проверка

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * mount | grep /mnt/nfs

:::
::: {.column width="70%"}

![](./image/16.jpg)

:::
::::::::::::::


# Подключение каталогов к дереву NFS


## создание и монтирование общего каталога

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * mkdir -p /srv/nfs/www
  * mount -o bind /var/www/ /srv/nfs/www/

:::
::: {.column width="70%"}

![](./image/17.jpg)

:::
::::::::::::::


## проверка в сервере

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * ls /srv/nfs/www

:::
::: {.column width="70%"}

![](./image/18.jpg)

:::
::::::::::::::

## проверка в клиенте

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * ls /srv/nfs/www

:::
::: {.column width="70%"}

![](./image/19.jpg)

:::
::::::::::::::

## настройка для экспорта (/etc/exports)

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * /srv/nfs/www 192.168.0.0/16(rw)
  * exportfs -r

:::
::: {.column width="70%"}

![](./image/21.jpg)

:::
::::::::::::::


## проверка

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * ls /mnt/nfs/

:::
::: {.column width="70%"}

![](./image/22.jpg)

:::
::::::::::::::

# Подключение каталогов для работы пользователей

## каталоги

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * mkdir -p -m 700 ~/common
  * cd ~/common
  * touch user@server.txt
  * mkdir -p /srv/nfs/home/user

:::
::: {.column width="70%"}

![](./image/24.jpg)

:::
::::::::::::::

## монтирование

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * mount -o bind /home/qscalizaya/common /srv/nfs/home/qscalizaya
:::
::: {.column width="70%"}

![](./image/26.jpg)

:::
::::::::::::::

## подключение каталога в файле /etc/exports

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * /srv/nfs/home/user 192.168.0.0/16(rw)
:::
::: {.column width="70%"}

![](./image/27.jpg)

:::
::::::::::::::

## обстановка файла /etc/fstab

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * /home/user/common /srv/nfs/home/user none bind 0 0
:::
::: {.column width="70%"}

![](./image/28.jpg)

:::
::::::::::::::


## экспорт каталога

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * exportfs -r
:::
::: {.column width="70%"}

![](./image/29.jpg)

:::
::::::::::::::


## каталоги в кленте

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * cd /mnt/nfs/home/user
  * touch user@client.txt
:::
::: {.column width="70%"}

![](./image/30.jpg)

:::
::::::::::::::


## проверка на сервере

:::::::::::::: {.columns align=center}

::: {.column width="100%"}

![](./image/31.jpg)

:::
::::::::::::::




