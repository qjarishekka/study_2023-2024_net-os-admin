---
## Author
author:
  name: Кхари Жекка Кализая Арсе
  email: 1032234412@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6
## Title
title: презентация Лабораторной работы № 16
subtitle: Базовая защита от атак типа «brute force»
license: CC BY
date: today
date-format: "YYYY-MM-DD" # Example: 2025-09-06
---

# защита с помощью Fail2ban

## установка

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * dnf -y install fail2ban

:::
::: {.column width="70%"}

![](./image/01.jpg)

:::
::::::::::::::



## запуск службы

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * systemctl start fail2ban
  * systemctl enable fail2ban

:::
::: {.column width="70%"}

![](./image/02.jpg)

:::
::::::::::::::

## журнал слжубы fail2ban

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * tail -f /var/log/fail2ban.log

:::
::: {.column width="70%"}

![](./image/03.jpg)

:::
::::::::::::::

## файл конфигурации

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * touch /etc/fail2ban/jail.d/customisation.local
  * bantime
  * port 
  * filter ddos
  * selinux

:::
::: {.column width="70%"}

![](./image/06.jpg)

:::
::::::::::::::


## файл конфигурации

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * auth
  * badbots
  * noscript
  * overflows
  * nohome
  * botsearch
  * fakegooglebot
  * modsecurity

:::
::: {.column width="70%"}

![](./image/09.jpg)

:::
::::::::::::::

## файл конфигурации

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * postfix
  * rbl
  * dovecot
  * sasl

:::
::: {.column width="70%"}

![](./image/12.jpg)

:::
::::::::::::::


## перезагрузка службы

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * systemctl restart fail2ban

:::
::: {.column width="70%"}

![](./image/13.jpg)

:::
::::::::::::::


## журнал

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * tail -f /var/log/fail2ban.log

:::
::: {.column width="70%"}

![](./image/14.jpg)

:::
::::::::::::::

# проверка работы Fail2ban

## статус Fail2ban

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * fail2ban-client status

:::
::: {.column width="70%"}

![](./image/15.jpg)

:::
::::::::::::::


## статус защиты SSH в Fail2ban

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * fail2ban-client status

:::
::: {.column width="70%"}

![](./image/16.jpg)

:::
::::::::::::::

## максимальное количество ошибок для SSH

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * fail2ban-client set sshd maxretry 2

:::
::: {.column width="70%"}

![](./image/17.jpg)

:::
::::::::::::::

## попытка подключения с клиента

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * ssh qscalizaya@server.net

:::
::: {.column width="70%"}

![](./image/18.jpg)

:::
::::::::::::::



## статус SSHD

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * fail2ban-client status sshd

:::
::: {.column width="70%"}

![](./image/19.jpg)

:::
::::::::::::::


## разблокировать IP-адрес

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * fail2ban-client set sshd unbanip 192.168.1.11
:::
::: {.column width="70%"}

![](./image/20.jpg)

:::
::::::::::::::

## проверка 

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * fail2ban-client status sshd
:::
::: {.column width="70%"}

![](./image/21.jpg)

:::
::::::::::::::


## список разрешенных IP-адресов

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * ignoreip

:::
::: {.column width="70%"}

![](./image/22.jpg)

:::
::::::::::::::

## список разрешенных IP-адресов

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * systemctl restart fail2ban
  
:::
::: {.column width="70%"}

![](./image/24.jpg)

:::
::::::::::::::


## проверка с клиента

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * ssh qscalizaya@server.net
  
:::
::: {.column width="70%"}

![](./image/25.jpg)

:::
::::::::::::::


## проверка с клиента

:::::::::::::: {.columns align=center}
::: {.column width="30%"}

  * fail2ban-client status sshd
  
:::
::: {.column width="70%"}

![](./image/26.jpg)

:::
::::::::::::::

# Внесение изменений в настройки внутреннего окружения виртуальных машин

## файлы и каталоги

:::::::::::::: {.columns align=center}

::: {.column width="70%"}

![](./image/27.jpg)

:::
::::::::::::::

## скрипт

:::::::::::::: {.columns align=center}

::: {.column width="70%"}

![](./image/28.jpg)

:::
::::::::::::::

## VagrantFile

:::::::::::::: {.columns align=center}

::: {.column width="70%"}

![](./image/29.jpg)

:::
::::::::::::::

